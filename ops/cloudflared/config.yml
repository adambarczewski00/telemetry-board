# Cloudflare Tunnel configuration
# Fill in your actual Tunnel UUID and ensure the credentials JSON is present
# at /etc/cloudflared/<TUNNEL-UUID>.json (mounted via volume from ./ops/cloudflared).

tunnel: TUNNEL-UUID
credentials-file: /etc/cloudflared/TUNNEL-UUID.json

ingress:
  # Public hostnames â†’ internal services (no host ports exposed)
  - hostname: api.aionflow.net
    service: http://api:8000
    originRequest:
      # Uvicorn runs HTTP/1.1; avoid occasional issues with HTTP/2 to origin
      http2Origin: false
  - hostname: prometheus.aionflow.net
    service: http://prometheus:9090
    originRequest:
      # Force HTTP/1.1 to origin to avoid rare 502s with some backends
      http2Origin: false
  # Default: 404
  - service: http_status:404
